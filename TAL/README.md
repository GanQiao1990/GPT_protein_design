
## TAL (phenylalanine ammonia-lyase) generation & screening

### Prerequisites
1) Please follow environment setup instructions in upper directory
2) Set the current directory as working directory

### STEP 1: data preparation

**Inputs** 
1) "uniprot-reviewed_yes.tab", reviewed UniProt enzyme sequences, not included in this repository due to limitation of file size, but can be easily obtained from UniProt https://www.uniprot.org/uniprotkb?facets=reviewed%3Atrue&query=enzyme
2) "TAL.txt", known TAL sequences

**Outputs**
1) "func_close.csv", sequences of functionally close enzymes for later discriminator evaluation
2) "train.csv", training set (0 is non-TAL sequences, 1 is TAL sequences)
3) "test.csv", testing set (0 is non-TAL sequences, 1 is TAL sequences)
4) "TAL_input.txt", finetuning set

**Script**  
data_preparation.py  

### STEP 2: data embedding and discriminator training
**Inputs**
1) "train.csv"
2) "test.csv"

**Outputs**  
"model" (the discriminator, a directory with Keras model object). 
This object is not included in the repository due to file size limitation, but it can be easily reproduced following the python script. Please make sure to specify the path to the model.

**Script**  
discriminator_training.py  

### STEP 3: finetuning ProtGPT2
**Inputs**  
"TAL_input.txt"

**Outputs**  
A directory containing the finetuned ProtGPT2 model.  

**Script**  
finetune.sh  
**NOTE:** Please make sure to specify the paths to input files and to the output.

### STEP 4: sequence generation
**Inputs**  
The finetuned ProtGPT2 model (specify the path)

**Outputs**  
"gen.csv", sequences generated by the finetuned ProtGPT2 model

**Script**  
generation.py

### STEP 5: evaluation (predictions) on the generated sequences
**Inputs**
1) "model" (the discriminator, a directory with Keras model object). This object is not included in the repository due to file size limitation, but it can be easily reproduced following the python script. Please make sure to specify the path to the model.
2) "gen.csv"
3) "func_close.csv"

**Outputs**
1) "gen.csv", predictions added, overriding the original file
2) "func_close.csv", predictions added, overriding the original file

**Script**  
evaluation.py






