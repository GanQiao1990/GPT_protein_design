
## AMP (antimicrobial peptides) generation & screening

### Prerequisites
Please follow environment setup instructions in upper directory.

### STEP 1: data preparation

**Inputs** 
1) "aa_compo.csv", amino acid composition in natural proteomes, obtained from https://proteopedia.org/wiki/index.php/Amino_acid_composition;
2) "SATPdb_amp.fa", AMP sequences from https://webs.iiitd.edu.in/raghava/satpdb/down.php ; limited to 'antibacterial peptide';
3) "short_peptides_uniprot.fasta", short peptides obtained from UniProt https://www.uniprot.org/uniprotkb?query=(reviewed:true)%20AND%20(length:[*%20TO%2050])

**Outputs**
1) "X_train", sequences of training set
2) "y_train", labels of training set (0 is non-AMP, 1 is AMP)
3) "X_test", sequences of testing set
4) "y_test", labels of testing set (0 is non-AMP, 1 is AMP)
5) "finetune_train.txt", training AMP sequences for finetuning
6) "finetune_dev.txt", validation AMP sequences for finetuning

**Script**  
data_preparation.py  

### STEP 2: data embedding and discriminator training
**Inputs**
1) "X_train"
2) "y_train"
3) "X_test"
4) "y_test"

**Outputs**  
"model" (the discriminator, a directory with Keras model object). This object is not included in the repository due to file size limitation, but it can be easily reproduced following the python script. Please make sure to specify the path to the model.

**Script**  
discriminator_training.py  

### STEP 3: finetuning ProtGPT2
**Inputs**  
1) "finetune_train.txt"
2) "finetune_dev.txt"

**Outputs**  
A directory containing the finetuned ProtGPT2 model.  

**Script**  
finetune.sh  
NOTE: Please make sure to specify the paths to input files and to the output.

### STEP 4: sequence generation
**Inputs**
1) The non-finetuned ProtGPT2 model
2) The finetuned ProtGPT2 model (specify the path)

**Outputs**
1) "protgpt2_shorts.csv", peptides generated by the non-finetuned ProtGPT2 model
2) "amp_gen_seqs.csv", peptides generated by the finetuned ProtGPT2 model

**Script**  
generation.py

### STEP 5: evaluation (predictions) on the generated sequences
**Inputs**
1) "model" (the discriminator, a directory with Keras model object). This object is not included in the repository due to file size limitation, but it can be easily reproduced following the python script. Please make sure to specify the path to the model.
2) "protgpt2_shorts.csv"
3) "amp_gen_seqs.csv"
4) "aa_compo.csv"

**Outputs**  
"amp_pred.csv", containing sequences and predictions for random sequences, non-finetuned-generated sequences, and finetuned-generated sequences.

**Script**  
evaluation.py












